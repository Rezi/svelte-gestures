!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((t=t||self).svelteGestures={})}(this,(function(t){"use strict";const n=300,e="none";function i(t,n,e){return t.addEventListener(n,e),()=>t.removeEventListener(n,e)}function o(t,n){const e=t.getBoundingClientRect(),i=Math.abs(n[0].clientX-n[1].clientX),o=Math.abs(n[0].clientY-n[1].clientY),c=Math.min(n[0].clientX,n[1].clientX)+i/2,l=Math.min(n[0].clientY,n[1].clientY)+o/2;return{x:Math.round(c-e.left),y:Math.round(l-e.top)}}function c(t,n,e,i,o){t.dispatchEvent(new CustomEvent(`${n}${o}`,{detail:{event:e,pointersCount:i.length}}))}function l(t,n,e,o,l,u="none"){n.style.touchAction=u;let r=[];const a=i(n,"pointerdown",(function(u){r.push(u),c(n,t,u,r,"down"),null==o||o(r,u);const a=u.pointerId;function s(e){a===e.pointerId&&(r=function(t,n){return n.filter((n=>t.pointerId!==n.pointerId))}(e,r),r.length||(f(),p(),h()),c(n,t,e,r,"up"),null==l||l(r,e))}const f=i(n,"pointermove",(i=>{r=r.map((t=>i.pointerId===t.pointerId?i:t)),c(n,t,i,r,"move"),null==e||e(r,i)})),p=i(n,"lostpointercapture",(t=>{s(t)})),h=i(n,"pointerup",(t=>{s(t)}))}));return{destroy:()=>{a()}}}function u(t){return Math.hypot(t[0].clientX-t[1].clientX,t[0].clientY-t[1].clientY)}function r(t){const n={left:{top:360,bottom:180},right:{top:0,bottom:180}},e=t[1].clientX-t[0].clientX,i=t[0].clientY-t[1].clientY,o=Math.atan(e/i)/(Math.PI/180),c=e>0?n.right:n.left;return o+(i>0?c.top:c.bottom)}t.DEFAULT_DELAY=n,t.DEFAULT_MIN_SWIPE_DISTANCE=60,t.DEFAULT_TOUCH_ACTION=e,t.getCenterOfTwoPoints=o,t.pan=function(t,e={delay:n}){let i;return l("pan",t,(function(n,o){if(1===n.length&&Date.now()-i>e.delay){const n=t.getBoundingClientRect(),e=Math.round(o.clientX-n.left),i=Math.round(o.clientY-n.top);e>=0&&i>=0&&e<=n.width&&i<=n.height&&t.dispatchEvent(new CustomEvent("pan",{detail:{x:e,y:i}}))}}),(function(){i=Date.now()}),null)},t.pinch=function(t){const n="pinch";let e,i=null,c=0;return l(n,t,(function(o){if(2===o.length){const l=u(o);if(null!==i&&l!==i){const i=l/c;t.dispatchEvent(new CustomEvent(n,{detail:{scale:i,center:e}}))}i=l}}),(function(n){2===n.length&&(c=u(n),e=o(t,n))}),(function(t){1===t.length&&(i=null)}))},t.rotate=function(t){const n="rotate";let e,i=null,c=0;return l(n,t,(function(o){if(2===o.length){const l=r(o);if(null!==i&&l!==i){let i=l-c;i>180&&(i-=360),t.dispatchEvent(new CustomEvent(n,{detail:{rotation:i,center:e}}))}i=l}}),(function(n){2===n.length&&(n=n.sort(((t,n)=>t.clientX-n.clientX)),e=o(t,n),c=r(n))}),(function(t){1===t.length&&(i=null)}))},t.setPointerControls=l,t.swipe=function(t,i={timeframe:n,minSwipeDistance:60,touchAction:e}){const o="swipe";let c,u,r;return l(o,t,null,(function(t,n){u=n.clientX,r=n.clientY,c=Date.now()}),(function(n,e){if(0===n.length&&Date.now()-c<i.timeframe){const n=e.clientX-u,c=e.clientY-r,l=Math.abs(n),a=Math.abs(c);let s=null;l>=2*a&&l>i.minSwipeDistance?s=n>0?"right":"left":a>=2*l&&a>i.minSwipeDistance&&(s=c>0?"bottom":"top"),s&&t.dispatchEvent(new CustomEvent(o,{detail:{direction:s}}))}}),i.touchAction)},t.tap=function(t,e={timeframe:n}){let i,o,c;return l("tap",t,null,(function(t,n){o=n.clientX,c=n.clientY,i=Date.now()}),(function(n,l){if(Math.abs(l.clientX-o)<4&&Math.abs(l.clientY-c)<4&&Date.now()-i<e.timeframe){const n=t.getBoundingClientRect(),e=Math.round(l.clientX-n.left),i=Math.round(l.clientY-n.top);t.dispatchEvent(new CustomEvent("tap",{detail:{x:e,y:i}}))}}))},Object.defineProperty(t,"__esModule",{value:!0})}));
